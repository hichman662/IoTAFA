<ion-segment value="all" color="tertiary" class="animate__animated animate__slideInUp animate__fast" scrollable="true" mode="md" [(ngModel)]="segmentModel" lines="none">
    <ion-segment-button value="telemetry">
        <ion-icon name="list-circle-outline"></ion-icon>
        <ion-label>Telemetry</ion-label>
    </ion-segment-button>
    <ion-segment-button value="specificTelemetry">
        <ion-icon name="receipt-outline"></ion-icon>
        <ion-label>Specific Telemetry</ion-label>
    </ion-segment-button>
</ion-segment>


<div *ngIf="segmentModel === 'telemetry'">
    <form [formGroup]="telemetryForm" (ngSubmit)="onSubmit()">
        <ion-item>
            <ion-label position="stacked">Name</ion-label>
            <ion-input type="text" formControlName="Name" class="form-control"></ion-input>
            <div class="error" *ngIf="telemetryForm.controls.Name.errors && telemetryForm.controls.Name.touched">
                To add Telemetry please fill out this field
            </div>
        </ion-item>
        <ion-item>
            <ion-label>Frecuency</ion-label>
            <ion-input type="number" formControlName="Frecuency" class="form-control" id="frecuency" name="Frecuency"></ion-input>

            <div class="error" *ngIf="telemetryForm.controls.Frecuency.errors && telemetryForm.controls.Frecuency.touched">
                To add telemetry please fill out this field
            </div>
        </ion-item>


        <ion-item>
            <ion-label>Unit</ion-label>
            <ion-select value="6" okText="Okay" cancelText="Dismiss" class="form-group" formControlName="Unit">
                <div class="error" *ngIf="telemetryForm.controls.Unit.errors && telemetryForm.controls.Unit.touched">
                    To add telemetry please select the appropriate option
                </div>
                <ion-select-option value="1">Percent</ion-select-option>
                <ion-select-option value="2">Degrees farenheit</ion-select-option>
                <ion-select-option value="3">Degrees celsius</ion-select-option>
                <ion-select-option value="4">Geolocation</ion-select-option>
                <ion-select-option value="5">Steps</ion-select-option>
                <ion-select-option value="6">Beats per minute</ion-select-option>
            </ion-select>
        </ion-item>

        <ion-item>
            <ion-label>Schema</ion-label>
            <ion-select value="1" okText="Okay" cancelText="Dismiss " class="form-group" formControlName="Schema">
                <div class="error" *ngIf="telemetryForm.controls.Schema.errors && telemetryForm.controls.Schema.touched">
                    To add telemetry please select the appropriate option
                </div>
                <ion-select-option value="1">Autogenerated</ion-select-option>
                <ion-select-option value="2">Enum</ion-select-option>
                <ion-select-option value="3">Integer</ion-select-option>
                <ion-select-option value="4">String</ion-select-option>
                <ion-select-option value="5">Double</ion-select-option>
                <ion-select-option value="6">Boolean</ion-select-option>
                <ion-select-option value="7">Text</ion-select-option>
                <ion-select-option value="8">Long</ion-select-option>
                <ion-select-option value="9">Time</ion-select-option>
                <ion-select-option value="10">Date</ion-select-option>
                <ion-select-option value="11">Object</ion-select-option>
                <ion-select-option value="12">OID</ion-select-option>
            </ion-select>
        </ion-item>

        <ion-item>
            <ion-label>Type</ion-label>
            <ion-select value="1" okText="Okay" cancelText="Dismiss" class="form-group" formControlName="Type" name="Type">
                <div class="error" *ngIf="telemetryForm.controls.Type.errors && telemetryForm.controls.Type.touched">
                    To add telemetry please select the appropriate option
                </div>
                <ion-select-option value="1">State</ion-select-option>
                <ion-select-option value="2">Event</ion-select-option>
                <ion-select-option value="3">Location</ion-select-option>
                <ion-select-option value="4">Sensor</ion-select-option>

            </ion-select>
        </ion-item>
        <br>
        <ion-button expand="block " class="save" size="small" fill="solid" type="submit" color="light" [disabled]="!telemetryForm.valid">
            Done
        </ion-button>
    </form>

</div>
<div *ngIf="segmentModel === 'specificTelemetry'">


    <!-- Event form -->
    <ion-card-header [hidden]="formNumber !== 2" color="success" class="animate__animated animate__slideInUp animate__fast"> You can add evenet telemetry </ion-card-header>
    <form [formGroup]="eventForm" *ngIf="formNumber == 2" (ngSubmit)="eventSubmit()">

        <ion-item>
            <ion-label>Severity</ion-label>
            <ion-select value="1" okText="Okay" cancelText="Dismiss" class="form-group" formControlName="Severity">
                <div class="error" *ngIf="eventForm.controls.Severity.errors && eventForm.controls.Severity.touched">
                    To add event telemetry please select the appropriate option
                </div>
                <ion-select-option value="1">warning</ion-select-option>
                <ion-select-option value="2">error</ion-select-option>
                <ion-select-option value="3">info</ion-select-option>
            </ion-select>
        </ion-item>
        <br>
        <ion-button expand="block " class="save" size="small" fill="solid" type="submit" color="light" [disabled]="!eventForm.valid">
            Save event
        </ion-button>
    </form>

    <!-- location form -->
    <ion-card-header [hidden]="formNumber !== 3" color="success" class="animate__animated animate__slideInUp animate__fast"> You can add location telemetry </ion-card-header>
    <form [formGroup]="locationForm" *ngIf="formNumber == 3" (ngSubmit)="locationSubmit()">

        <ion-item>
            <ion-label>Latitude</ion-label>
            <ion-input type="number" formControlName="Latitude" class="form-control" id="latitude" name="Latitude"></ion-input>

            <div class="error" *ngIf="locationForm.controls.Latitude.errors && locationForm.controls.Latitude.touched">
                To add location please fill out this field
            </div>
        </ion-item>
        <ion-item>
            <ion-label>Longitude</ion-label>
            <ion-input type="number" formControlName="Longitude" class="form-control" id="longitude" name="Longitude"></ion-input>

            <div class="error" *ngIf="locationForm.controls.Longitude.errors && locationForm.controls.Longitude.touched">
                To add location please fill out this field
            </div>
        </ion-item>
        <ion-item>
            <ion-label>Altitude</ion-label>
            <ion-input type="number" formControlName="Altitude" class="form-control" id="altitude" name="Altitude"></ion-input>

            <div class="error" *ngIf="locationForm.controls.Altitude.errors && locationForm.controls.Altitude.touched">
                To add location please fill out this field
            </div>
        </ion-item>
        <br>
        <ion-button expand="block " class="save" size="small" fill="solid" type="submit" color="light" [disabled]="!locationForm.valid">
            Save location
        </ion-button>
    </form>
    <!-- Sensor form -->
    <ion-card-header [hidden]="formNumber !== 4" color="success" class="animate__animated animate__slideInUp animate__fast"> You can add sensor telemetry </ion-card-header>
    <form [formGroup]="sensorForm" *ngIf="formNumber == 4" (ngSubmit)="sensorSubmit()">

        <ion-item>
            <ion-label position="stacked">Sensor type</ion-label>
            <ion-input type="text" formControlName="SensorType" class="form-control"></ion-input>
            <div class="error" *ngIf="sensorForm.controls.SensorType.errors && sensorForm.controls.SensorType.touched">
                To add Sensor please fill out this field
            </div>
        </ion-item>
        <br>
        <ion-button expand="block " class="save" size="small" fill="solid" type="submit" color="light" [disabled]="!sensorForm.valid">
            Save sensor
        </ion-button>
    </form>
    <!-- Range state form -->
    <ion-card-header [hidden]="formNumber !== 1" color="success" class="animate__animated animate__slideInUp animate__fast"> You can add state telemetry </ion-card-header>
    <form [formGroup]="rangeStateForm" *ngIf="formNumber == 1" (ngSubmit)="rangeStateSubmit()">

        <ion-item>
            <ion-label position="stacked">Name</ion-label>
            <ion-input type="text" formControlName="Name" class="form-control"></ion-input>
            <div class="error" *ngIf="rangeStateForm.controls.Name.errors && rangeStateForm.controls.Name.touched">
                To add state telemetry please fill out this field
            </div>
        </ion-item>
        <ion-item>
            <ion-label position="stacked">Value</ion-label>
            <ion-input type="text" formControlName="Value" class="form-control"></ion-input>
            <div class="error" *ngIf="rangeStateForm.controls.Value.errors && rangeStateForm.controls.Value.touched">
                To add state telemetry please fill out this field
            </div>
        </ion-item>
        <br>
        <ion-button expand="block " class="save" size="small" fill="solid" type="submit" color="light" [disabled]="!rangeStateForm.valid">
            Save state
        </ion-button>
    </form>

</div>




<!-- Fin the forms -->
<div class="telemetries" line="">
    <div class="telemetry" *ngFor="let telemetry of arrayTelemetries|keyvalue">
        <mat-expansion-panel details>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <ion-item>
                        <ion-thumbnail size="small" slot="start">
                            <img src="assets/icon/deviceTemplate.svg">
                        </ion-thumbnail>
                        <ion-label>{{telemetry.value.Name}}</ion-label>
                    </ion-item>
                </mat-panel-title>

            </mat-expansion-panel-header>

            <!--   <ion-item-sliding>
      <ion-item-options side="end">
          <ion-item-option color="danger" (click)="null" expandable>
              <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
          </ion-item-option>
      </ion-item-options>
  </ion-item-sliding> -->

            <ion-card>
                <ion-item>
                    <ion-label>Frecuency</ion-label>
                    <ion-badge slot="end">{{telemetry.value.Frecuency}}</ion-badge>
                </ion-item>
                <ion-item>
                    <ion-label>Unit</ion-label>
                    <ion-badge slot="end">{{telemetry.value.Unit}}</ion-badge>
                </ion-item>
                <ion-item>

                    <ion-label>Schema</ion-label>
                    <ion-badge slot="end">{{telemetry.value.Schema}}</ion-badge>
                </ion-item>
                <ion-item>
                    <ion-label>Type</ion-label>
                    <ion-badge slot="end">{{telemetry.value.Type}}</ion-badge>
                </ion-item>



            </ion-card>
            <!-- <p>Content panel.</p> -->

        </mat-expansion-panel>



    </div>
</div>